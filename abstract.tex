\begin{abstract}
Implantable medical devices are designed to diagnose and improve certain adverse physiological conditions, thus the safety and efficacy of the devices have to be evaluated in closed-loop within their physiological context. 
Model-based design has enabled closed-loop verification early in the design stage and closed-loop model checking has been proposed to provide confidence to the safety and efficacy of the devices. 
The biggest challenge for closed-loop model-checking of medical devices is modeling the physiological environment. Unlike system modeling in which there is only one concrete system, there are countless number of physiological conditions and different models are required to distinguish behaviors associated with each condition.
Over-approximation can be used to not only reduce model complexity, but also cover physiological-relevant behaviors from multiple physiological conditions in an abstract model. 
However, over-approximation inevitably introduces behaviors that are not physiologically possible, potentially causing false-negatives during model checking. Moreover, by abstracting multiple physiological conditions, behaviors from different physiological conditions become indistinguishable in over-approximated models, causing ambiguities to physicians who are responsible to determine the validity of potential counter-examples.  
In this paper we propose an abstraction-tree-based framework for closed-loop model checking of medical devices, and use implantable pacemaker as an example.
A set of physiological abstraction rules are developed to merge behaviors from models representing different physiological conditions, and ensure majority of behaviors added to the abstract models are also physiological-relevant.  
By applying the physiological abstraction rules, an abstraction tree is constructed and can be used for closed-loop model checking. An automated search algorithm first select the most abstract models that are appropriate for the physiological requirements as the initial physiological models. In case of property violations, the search algorithm explore the abstraction tree for the most refined models which can still produce property violations, which branches an abstract property violation into possible physiological conditions thus provides helpful physiological context to the physicians.
With this framework, a person with expertise in formal method do not need physiological knowledge to use the abstraction tree for model checking, and model checking results can be feedback to the physicians with unambiguous physiological context. The framework can also be extended to other Cyber Physical System domains to bridge the gap between the cyber domain and the physical domain.
%During closed-loop model checking, both the system and its environment model are abstracted The Counter-Example-Guided Abstraction and Refinement (CEGAR) framework has been developed to reduce the complexity of the model using over-approximation and refine the model when false-positives are found. However in environment modeling, an  therefore determining the validity of a closed-loop execution is not intuitive, making it difficult to apply CEGAR during environment modeling. On the other hand, the development of environment models and validation of closed-loop executions rely heavily on domain expertise. It is therefore possible to encode the domain knowledge during environment modeling and provide guidance during the refinement of the environment models. In this paper, we use implantable pacemaker as example to illustrate the challenges for applying CEGAR during environment modeling, and how to use encoded domain knowledge to guide the environment model abstraction and refinement.
\end{abstract}